
<!DOCTYPE html>
<html>
<head>
    <title>CoinDCX Live Trader</title>
    <script>
        async function refreshStatus() {
            let res = await fetch("/status");
            let data = await res.json();
            document.getElementById("status").innerText = data.status + " (" + data.last + ")";
            document.getElementById("usdt").innerText = data.usdt.toFixed(2);
            document.getElementById("pnl").innerText = data.net_pnl.toFixed(2);
            document.getElementById("coins").innerText = JSON.stringify(data.coins);
            let trades = data.trades.map(t => JSON.stringify(t)).join("<br>");
            document.getElementById("trades").innerHTML = trades;
        }
        async function startBot() {
            await fetch("/start", {method: "POST"});
            refreshStatus();
        }
        async function stopBot() {
            await fetch("/stop", {method: "POST"});
            refreshStatus();
        }
        setInterval(refreshStatus, 5000);
    </script>
</head>
<body onload="refreshStatus()">
    <h1>CoinDCX Live Trading Dashboard</h1>
    <p>Status: <span id="status">-</span></p>
    <p>USDT Balance: $<span id="usdt">-</span></p>
    <p>Coin Balances: <span id="coins">-</span></p>
    <p>Net P&L: $<span id="pnl">0.00</span></p>
    <button onclick="startBot()">Start</button>
    <button onclick="stopBot()">Stop</button>
    <h3>Recent Trades:</h3>
    <div id="trades"></div>
</body>
</html>
