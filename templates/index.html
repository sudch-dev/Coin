<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Algo Trading System</title>
<style>
body{margin:0;font-family:Arial;background:#0e0e0e;color:#fff}
.top{padding:15px;background:#111;display:flex;justify-content:space-between;align-items:center}
.btn{padding:10px 18px;border:none;border-radius:6px;cursor:pointer}
.start{background:#00c853;color:#000}
.stop{background:#ff1744;color:#fff}
.grid{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;padding:12px}
.card{background:#151515;padding:12px;border-radius:10px}
h3{margin:0 0 8px 0;font-size:14px;color:#00e5ff}
.log{font-size:12px;max-height:200px;overflow:auto}
</style>
</head>

<body>

<div class="top">
  <div>ðŸ¤– Production Algo Trading System</div>
  <div>
    <button class="btn start" onclick="start()">START</button>
    <button class="btn stop" onclick="stop()">STOP</button>
  </div>
</div>

<div class="grid">
  <div class="card"><h3>Status</h3><div id="status"></div></div>
  <div class="card"><h3>Equity</h3><div id="equity"></div></div>
  <div class="card"><h3>Regime</h3><div id="regime"></div></div>
  <div class="card"><h3>USDT</h3><div id="usdt"></div></div>

  <div class="card"><h3>Positions</h3><pre id="positions"></pre></div>
  <div class="card"><h3>Orders</h3><pre id="orders"></pre></div>
  <div class="card"><h3>Trades</h3><pre id="trades"></pre></div>
  <div class="card"><h3>Errors</h3><pre id="errors"></pre></div>

  <div class="card" style="grid-column:span 4">
    <h3>System Logs</h3>
    <div class="log" id="logs"></div>
  </div>
</div>

<script>
function start(){fetch("/start",{method:"POST"})}
function stop(){fetch("/stop",{method:"POST"})}

async function refresh(){
  let r=await fetch("/status");
  let d=await r.json();

  document.getElementById("status").innerText=d.status+" | "+d.last;
  document.getElementById("equity").innerText=d.equity;
  document.getElementById("regime").innerText=d.regime;
  document.getElementById("usdt").innerText=(d.balances.USDT||0);

  document.getElementById("positions").innerText=JSON.stringify(d.positions,null,2);
  document.getElementById("orders").innerText=JSON.stringify(d.orders,null,2);
  document.getElementById("trades").innerText=JSON.stringify(d.trades,null,2);
  document.getElementById("errors").innerText=JSON.stringify(d.errors,null,2);

  document.getElementById("logs").innerHTML=d.logs.map(x=>"<div>"+x+"</div>").join("");
}

setInterval(refresh,2000);
refresh();
</script>

</body>
</html>